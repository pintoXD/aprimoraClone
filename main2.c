#include <stdlib.h>
#include <stdio.h>


FILE *arquivo;





 int matriz [14][199]=  {{4460,4352,588,1604,584,512,588,1604,
		588,1576,612,512,588,512,584,1576,
		616,512,588,512,588,1576,616,508,
		588,512,588,1572,616,1600,588,512,
		588,1580,612,488,612,512,588,1576,
		616,1572,616,1572,616,1604,584,1576,
		612,1580,612,1608,588,1576,612,508,
		588,512,588,512,584,512,588,512,
		584,516,584,488,612,488,612,512,
		584,488,612,508,588,512,588,512,
		584,512,588,1576,616,1572,616,1600,
		588,1600,588,1576,612,1576,612,1576,
		612,1572,568,5220,4480,4332,616,1576,
		612,512,588,1604,588,1600,588,512,
		588,512,584,1604,584,516,584,516,
		584,1608,584,488,612,488,612,1572,
		616,1572,616,488,608,1580,616,512,
		588,512,588,1580,612,1572,616,1600,
		588,1576,612,1576,612,1576,612,1584,
		612,1576,612,512,588,512,584,512,
		588,512,584,512,588,512,588,512,
		588,512,588,512,584,512,588,508,
		588,512,588,508,588,512,588,1604,
		588,1572,616,1600,588,1572,616,1600,
		588,1576,612,1600,588,1580,564},

{4456,4364,620,1572,616,484,608,1584,
		612,1572,616,484,612,488,584,1600,
		616,488,608,492,608,1580,612,488,
		608,488,612,1572,616,1576,612,484,
		584,1608,616,488,608,488,612,1576,
		616,1576,612,1576,612,1572,616,1576,
		612,1576,616,1580,612,1576,616,484,
		612,484,612,488,608,488,584,516,
		608,492,608,492,608,488,608,492,
		608,1580,608,488,612,488,608,488,
		608,492,608,1584,612,1576,608,1580,
		608,492,608,1580,612,1576,616,1572,
		612,1576,520,5288,4480,4328,620,1572,
		616,484,612,1580,612,1576,612,488,
		584,512,612,1576,612,488,608,492,
		612,1580,612,488,612,484,612,1572,
		616,1572,616,484,584,1612,612,488,
		608,488,584,1608,612,1576,612,1572,
		616,1576,612,1576,612,1576,616,1580,
		612,1576,616,484,612,484,584,516,
		608,488,584,516,612,488,584,512,
		612,488,584,512,612,1576,612,488,
		584,512,612,488,580,520,612,1580,
		616,1572,612,1576,612,488,584,1608,
		612,1572,616,1576,612,1576,520},

{4484,4332,584,1608,572,528,580,1612,
		572,1612,576,528,544,552,612,1572,
		576,528,612,508,592,1580,584,516,
		584,512,612,1576,572,1616,572,528,
		608,1584,560,540,608,492,608,1580,
		548,1640,576,1612,548,1640,548,1644,
		576,1612,548,1644,576,1616,548,552,
		608,492,604,492,608,488,612,488,
		608,492,608,492,608,488,608,1584,
		612,1576,548,552,612,488,604,492,
		608,492,576,1616,544,1644,548,552,
		584,536,524,1640,572,1616,572,1620,
		572,1616,516,5288,4420,4392,584,1612,
		572,528,580,1608,548,1640,576,524,
		612,488,612,1576,564,536,612,488,
		612,1576,576,528,608,488,608,1576,
		576,1616,548,552,608,1588,612,484,
		616,484,608,1584,544,1640,548,1644,
		548,1640,572,1616,548,1640,576,1624,
		612,1576,580,516,612,488,608,488,
		612,488,604,512,592,488,608,496,
		608,488,608,1580,576,1616,544,552,
		612,488,608,492,608,492,608,1580,
		552,1636,576,528,608,488,608,1580,
		584,1604,584,1600,568,1624,520},

{4384,4428,516,1672,636,464,516,1676,
		636,1552,516,580,636,464,516,1672,
		636,464,516,584,636,1556,636,464,
		512,584,636,1552,636,1552,520,580,
		516,1680,516,580,520,580,636,1556,
		636,1556,512,1672,636,1556,516,1672,
		592,1596,636,1556,636,1552,644,456,
		636,464,516,580,516,584,516,580,
		516,584,516,584,628,472,632,1560,
		516,580,632,468,628,468,516,584,
		516,584,600,1592,600,1592,512,584,
		520,1672,596,1592,516,1668,628,1564,
		592,1596,604,5208,4464,4348,596,1592,
		592,508,604,1588,560,1628,604,492,
		528,572,604,1584,528,572,528,572,
		608,1584,528,572,524,572,528,1664,
		524,1660,528,572,528,1668,604,492,
		608,492,608,1584,528,1664,600,1584,
		528,1664,528,1660,564,1632,568,1620,
		528,1660,564,536,600,496,528,572,
		524,572,576,524,572,528,604,496,
		524,576,568,1620,528,572,564,536,
		560,536,528,572,572,528,524,1668,
		564,1624,592,508,564,1624,568,1624,
		568,1616,564,1628,596,1596,600},

{4428,4400,548,1644,608,492,608,1580,
		612,1580,608,492,604,492,608,1580,
		608,492,608,496,604,1588,604,492,
		608,492,604,1580,608,1580,608,492,
		608,1588,608,492,608,492,604,1584,
		608,1584,604,1580,608,1580,608,1580,
		608,1584,608,1588,604,1584,608,492,
		604,492,608,492,604,492,608,492,
		604,496,604,496,604,1584,608,1576,
		612,492,604,492,604,496,604,492,
		608,492,608,1584,604,492,608,492,
		604,1584,604,1580,612,1576,612,1580,
		608,1580,600,5180,4416,4400,612,1576,
		612,488,608,1584,608,1580,608,492,
		608,492,604,1580,608,492,608,492,
		608,1584,608,492,604,496,604,1580,
		608,1580,608,492,608,1584,608,492,
		608,492,608,1580,612,1580,608,1580,
		608,1580,608,1580,608,1580,548,1644,
		548,1644,576,524,608,492,604,492,
		608,488,608,492,608,492,608,492,
		608,1576,612,1576,548,552,612,488,
		608,492,608,488,608,492,608,1584,
		608,488,608,492,608,1576,608,1580,
		612,1576,612,1580,608,1584,628},

{4416,4404,548,1644,608,492,604,1584,
		608,1576,548,556,608,488,608,1576,
		608,492,612,488,608,1584,608,488,
		608,492,608,1576,612,1576,608,492,
		604,1584,616,488,608,488,612,1576,
		612,1580,608,1576,612,1572,548,1644,
		612,1576,612,1580,612,1576,612,488,
		608,488,612,488,608,488,608,488,
		608,492,608,492,608,1576,612,1576,
		612,1572,612,488,612,488,608,488,
		608,492,608,1580,616,484,612,488,
		608,488,608,1580,612,1572,616,1572,
		552,1640,604,5200,4448,4360,576,1616,
		612,484,612,1580,612,1572,580,520,
		612,488,608,1576,612,488,612,488,
		612,1576,580,520,612,484,612,1576,
		608,1572,580,524,608,1580,616,488,
		608,488,612,1576,612,1576,588,1600,
		612,1572,552,1636,612,1580,612,1580,
		576,1612,612,488,608,488,612,488,
		608,488,608,488,608,492,608,488,
		612,1576,608,1576,612,1576,612,488,
		612,484,612,488,608,492,608,1580,
		612,488,608,488,612,488,608,1580,
		612,1576,608,1576,576,1616,604},

{4468,4336,596,1592,632,488,496,1676,
		512,1672,516,584,512,604,496,1672,
		636,468,508,588,512,1676,636,488,
		488,584,516,1668,596,1592,600,484,
		532,1672,596,532,572,500,528,1664,
		600,1584,528,1660,528,1664,608,1576,
		528,1660,528,1668,528,1660,528,568,
		592,508,576,520,572,524,576,524,
		512,584,580,520,580,1608,604,496,
		572,1608,588,516,576,524,576,520,
		584,512,620,1576,524,572,584,1608,
		528,568,528,1664,532,1656,528,1660,
		528,1664,584,5212,4384,4424,608,1580,
		528,572,604,1588,524,1660,528,572,
		528,568,528,1664,596,500,588,516,
		564,1624,516,580,600,524,492,1672,
		512,1672,636,484,496,1676,636,468,
		512,604,496,1668,640,1548,640,1552,
		636,1552,516,1668,640,1552,516,1676,
		636,1552,636,488,492,584,516,584,
		512,584,512,584,512,588,512,584,
		516,1672,516,584,512,1676,632,488,
		492,584,596,500,596,504,592,1596,
		596,508,596,1592,528,572,604,1588,
		604,1584,604,1580,528,1660,620},

{
		4360,4444,516,1672,636,460,636,1556,
		636,1556,636,460,516,584,632,1552,
		632,472,516,580,632,1564,516,580,
		636,460,604,1588,516,1668,632,468,
		592,1600,520,580,556,540,600,1592,
		600,1588,600,1588,596,1592,592,1600,
		516,1672,516,1676,556,1632,524,572,
		564,560,548,528,524,572,528,572,
		524,576,524,576,596,1592,568,532,
		596,496,528,572,524,572,528,572,
		524,576,576,1616,528,572,604,1588,
		604,1584,600,1588,600,1588,604,1584,
		600,1588,616,5192,4396,4420,528,1664,
		600,496,524,1668,608,1580,524,572,
		528,572,528,1660,608,492,608,492,
		528,1664,528,572,524,572,528,1660,
		528,1660,528,572,524,1672,600,496,
		528,572,524,1668,528,1660,528,1664,
		600,1588,600,1588,604,1584,528,1668,
		604,1580,528,572,608,492,524,572,
		528,572,524,572,528,572,576,528,
		600,1588,600,496,524,572,528,572,
		524,572,528,568,528,576,604,1592,
		524,572,528,1664,568,1620,520,1668,
		520,1668,592,1596,596,1596,576},

{

	4408,4392,576,1616,608,492,604,1584,
	612,1576,544,556,608,488,608,1576,
	548,556,608,492,608,1580,612,504,
	592,488,608,1576,548,1640,548,552,
	608,1584,544,576,588,508,592,1580,
	608,1580,608,1576,548,1640,548,1640,
	612,1580,612,1580,544,1644,548,552,
	608,508,588,488,612,508,588,488,
	608,492,608,1584,608,1576,548,552,
	608,508,592,488,608,488,608,488,
	608,492,608,512,588,488,608,1580,
	588,1600,580,1608,548,1640,548,1640,
	572,1616,556,5248,4416,4392,552,1640,
	548,552,608,1580,548,1644,608,492,
	604,492,608,1576,548,552,608,492,
	608,1580,584,516,612,484,584,1600,
	548,1640,548,552,612,1580,548,556,
	608,508,588,1580,544,1644,576,1612,
	544,1644,608,1576,548,1644,548,1644,
	548,1640,548,552,608,492,608,504,
	592,488,608,488,608,492,608,1584,
	608,1576,616,484,608,492,608,504,
	592,508,588,508,588,492,616,484,
	608,508,588,1580,612,1580,540,1644,
	544,1644,608,1576,548,1644,520

},

{
	4472,4340,612,1580,608,488,608,1584,
	608,1576,548,552,608,492,604,1580,
	608,492,608,492,608,1580,612,488,
	608,488,608,1576,612,1576,612,488,
	608,1584,608,492,608,492,608,1580,
	608,1576,612,1576,612,1580,608,1576,
	612,1580,608,1584,612,1576,612,488,
	608,488,608,492,604,492,608,488,
	608,492,608,1584,608,1576,612,488,
	608,1584,608,488,608,492,608,488,
	608,492,608,492,608,488,608,1580,
	608,492,608,1580,608,1580,608,1580,
	608,1580,592,5208,4472,4336,608,1580,
	608,492,608,1580,608,1580,608,492,
	608,488,608,1576,612,492,608,492,
	604,1584,608,492,608,488,608,1576,
	612,1580,608,488,608,1584,612,488,
	608,492,608,1580,608,1580,608,1580,
	608,1580,608,1580,608,1580,608,1584,
	612,1576,612,488,608,488,608,492,
	608,488,608,488,608,492,608,1584,
	608,1580,608,488,612,1580,612,488,
	608,488,608,488,608,492,608,492,
	608,488,608,1584,604,492,608,1580,
	548,1640,612,1576,612,1576,596},

{
	4448,4356,592,1596,588,512,588,1572,
	620,1568,620,508,588,508,592,1596,
	588,488,612,512,588,1604,588,508,
	588,508,588,1600,588,1600,588,484,
	612,1608,588,512,588,508,588,1548,
	644,1568,620,1596,592,1568,616,1572,
	616,1604,588,1604,588,1600,588,508,
	588,512,584,512,588,508,588,508,
	588,512,588,1576,616,508,588,512,
	588,1596,592,508,588,508,588,508,
	588,512,588,512,588,1596,592,1596,
	588,512,588,1572,620,1596,592,1568,
	616,1572,568,5236,4484,4328,616,1600,
	588,508,592,1572,616,1572,616,512,
	588,508,588,1600,588,512,588,508,
	588,1604,588,508,588,512,588,1600,
	588,1568,616,512,588,1576,616,512,
	588,508,588,1576,616,1600,588,1572,
	616,1596,592,1576,612,1600,588,1580,
	616,1572,616,508,588,508,588,512,
	588,508,588,508,588,512,588,1576,
	616,488,612,508,588,1596,592,508,
	588,512,588,508,588,512,588,512,
	588,1572,612,1572,616,512,588,1600,
	592,1596,592,1596,588,1580,564},

{
	4444,4368,612,1576,612,488,612,1576,
	612,1572,552,552,612,484,612,1572,
	616,488,612,488,608,1580,612,488,
	608,488,612,1572,612,1576,612,488,
	608,1584,612,488,608,488,612,1576,
	616,1568,580,1608,616,1576,612,1572,
	580,1612,612,1584,608,1584,604,488,
	612,484,612,488,608,488,608,488,
	612,488,608,1580,612,488,612,484,
	612,484,612,488,608,488,612,488,
	608,488,612,488,608,1580,612,1572,
	616,1572,612,1576,612,1572,616,1572,
	576,1612,524,5284,4476,4332,612,1576,
	612,488,608,1580,576,1612,612,488,
	608,492,608,1572,612,492,608,492,
	608,1576,576,528,608,488,608,1576,
	612,1572,612,488,612,1584,608,488,
	612,488,608,1580,612,1572,552,1636,
	548,1640,612,1576,612,1576,548,1648,
	612,1572,612,488,612,488,608,488,
	608,488,612,484,612,488,612,1580,
	616,484,608,488,608,488,612,484,
	612,488,608,488,608,492,608,488,
	612,1576,612,1576,612,1576,612,1572,
	552,1636,552,1640,608,1580,604

},

{
	4472,4324,620,1600,588,484,612,1580,
	612,1572,616,484,612,512,588,1568,
	616,488,612,484,616,1576,616,484,
	612,484,612,1572,616,1572,616,484,
	612,1604,588,488,612,484,616,1572,
	620,1572,616,1572,612,1600,588,1600,
	588,1572,616,1580,616,1572,616,508,
	588,484,612,512,584,484,616,484,
	612,484,616,1604,588,484,616,1600,
	588,508,588,484,616,484,612,484,
	612,488,612,484,616,1576,612,484,
	616,1572,616,1576,612,1600,588,1572,
	616,1572,564,5232,4484,4320,620,1572,
	616,484,612,1580,612,1572,616,484,
	612,484,616,1568,620,484,616,484,
	612,1576,616,484,612,484,616,1596,
	588,1572,616,484,612,1576,616,488,
	612,484,612,1604,588,1572,616,1572,
	616,1572,612,1576,612,1576,616,1576,
	616,1572,616,480,616,484,612,484,
	616,480,616,484,612,484,616,1576,
	616,484,612,1576,616,484,616,484,
	612,484,612,484,612,488,612,488,
	612,1576,616,480,616,1576,616,1568,
	616,1576,612,1572,616,1576,560

},

{
	4356,4436,620,1572,616,484,612,1580,
	612,1572,616,484,612,484,616,1568,
	616,484,616,484,616,1576,612,488,
	612,484,612,1572,616,1572,616,484,
	612,1580,616,484,616,480,616,1576,
	616,1572,612,1572,616,1572,616,1572,
	616,1572,616,1580,616,1568,620,480,
	616,484,612,484,616,484,612,484,
	612,488,612,1580,616,480,616,1576,
	616,1568,620,480,616,484,612,484,
	616,484,612,488,612,1572,616,484,
	612,484,616,1572,616,1572,616,1572,
	616,1572,516,5288,4480,4328,620,1568,
	620,480,616,1572,620,1572,616,480,
	616,480,616,1572,616,484,616,484,
	616,1572,620,480,616,480,616,1572,
	616,1568,620,480,616,1576,620,480,
	616,484,612,1580,612,1572,616,1572,
	616,1572,616,1572,616,1572,616,1576,
	616,1572,620,480,616,480,616,480,
	616,484,612,484,616,484,616,1576,
	616,480,616,1576,616,1572,616,480,
	616,484,616,480,616,484,616,484,
	616,1568,620,480,616,480,616,1568,
	620,1572,616,1568,620,1572,520 }};










int *samsungDataRaw;



 // unsigned int *rawBinSamsung;
 int *rawBitSamsung;


 int cont = 0;//Indexador do vetor resultante da conversão
 int cont2 = 0;
 int contElements = 0;

int main(){

  for(int lin = 0; lin < 14; lin++){
    cont = 0;
    contElements = 0;
    samsungDataRaw = (int*)malloc(sizeof(int)*200);
    rawBitSamsung  = (int*)malloc(sizeof(int)*200);

    for(int col = 0; col < 199; col++){

      printf("%d", col);

      samsungDataRaw[col] = matriz[lin][col];
    }








	int i;
	int n  = 199;




  /*Este for aí embaixo pode ser apagado depois.
  Ele só serve pra intercalar números positivos com negativos.
  Tipo, números nas posições pares do vetor são positivos,
  enquanto que os números nas posições ímpares são negativos.
  Isso foi feito porque é a forma como os dados são enviados do Arduino
  pra serial
  */
	for(i = 0; i < n; i++){
		int aux = 0;

		aux = samsungDataRaw[i];

		if(i%2 == 0){
			samsungDataRaw[i] = aux;

		}
		else{
			samsungDataRaw[i] = aux * (-1);
//			printf("Aux = %d", aux * -1);
		}


	if(i%12 == 0)
		printf("\n");
	printf(" %d,", samsungDataRaw[i]);


	}



	printf("\n");





	printf("\nNúmero de elementos %d\n", n);

	for (i = 0; i < n; i++){
		//Checa se tem alguma repetição. Tem de verificar em que condições isso acontece. Não lembro porque pus 5K

		if(samsungDataRaw[i] < (-5000))

			printf("\nRepetição encontrada rawFixed(%d) = %d\n", i,samsungDataRaw[i]);

	}



	for (i = 0; i < n; i++){

		//Começa aqui a putaria de converter pra binário
		// if(i+1 > n - 1){
		// 	printf("Limite atingido\n");
		// 	printf("samsungDataRaw[%d] = %d", i, samsungDataRaw[i]);
		// 	teste = i+1;
		//
		//
		// }

	if(samsungDataRaw[i] > 0){
	//Vai pegando de 2 em 2 até acabar tudo. Pode ser um problema...

				if(samsungDataRaw[i] > 4000 && samsungDataRaw[i+1] < (-4000)){



								rawBitSamsung[cont] = samsungDataRaw[i];
								cont++;
								rawBitSamsung[cont] = samsungDataRaw[i + 1];
								cont++;

				}


				else if(i+1 > n - 1 ){
					printf("Linha 76\n");
					printf("Limites do vetor excedido\n");
					rawBitSamsung[cont] = samsungDataRaw[i];
				}



			  else if((samsungDataRaw[i+1] < (-450) && samsungDataRaw[i+1] > (-750) ))
				{

		    	if(i==0)//Se for o primeiro elemento, coloca zero nessa bagaça. Consertar devo.
							rawBitSamsung[0] = rawBitSamsung[0];
							//Esse laço tenta ver se o espaçamento siginifica se é um bit 0

							rawBitSamsung[cont] = 0;
		  	  	  cont++;

				}
				else if((samsungDataRaw[i+1] < (-1400) && samsungDataRaw[i+1] > (-1700)))
				{

		    	if(i==0)//Se for o primeiro elemento, coloca zero nessa bagaça. Consertar devo.

							rawBitSamsung[0] = rawBitSamsung[0];
							//Esse laço tenta ver se o espaçamento siginifica se é um bit 0

							rawBitSamsung[cont] = 1;
		  	  	  cont++;

				}

				else if(samsungDataRaw[i + 1] < (-5000)){

							rawBitSamsung[cont] = samsungDataRaw[i];
							cont++;
							rawBitSamsung[cont] = samsungDataRaw[i + 1];
							cont++;




				}


		 }


	}

	printf("Cont: %d\n", cont);

	// printf("rawBitSamsung(150):");
int indexAux = 0;
int rawBitPartOne[100];
int auxContOne = 0;
int rawBitPartTwo[100];
int auxContTwo = 0;

	for(i = 0; i <= cont; i++){



		if(i%12 == 0)
				printf("\n");
				printf(" %d,",rawBitSamsung[i]);


				if(i > 10 && (rawBitSamsung[i] > 4000 && rawBitSamsung[i + 1] < (-4000)))
					indexAux = 1;

				if(indexAux == 1){
					rawBitPartTwo[auxContTwo] = rawBitSamsung[i];
					auxContTwo++;
				}
				else if(indexAux == 0){
					rawBitPartOne[auxContOne] = rawBitSamsung[i];
					auxContOne++;

			 }


	}

	printf("AuxContOne: %d\n", auxContOne);
	printf("AuxContTwo: %d\n", auxContTwo);


	int contAuxArray[50];
	int contAux = 0;


  arquivo  = fopen("testeHUE.txt", "a");

	for(i = 0; i < (auxContOne); i++){

		printf("%d",rawBitPartOne[i]);
    fprintf(arquivo,"%d",rawBitPartOne[i]);
    if(i == 1){
			printf(" ");
      fprintf(arquivo," ");
    }
		if( i == (auxContOne - 3)){
					printf(" ");
          fprintf(arquivo," ");
        }


		if(rawBitPartOne[i] == rawBitPartTwo[i]){
		contAux = contAux + 1;
		contAuxArray[contAux] = i;
		// printf("Igual em: %d", i);
		// printf("auxContOne: %d\n", i);
		}

	}
//	printf("\n");
	printf(" ");
  fprintf(arquivo," ");


	for(i = 0; i < (auxContOne - 1); i++){

		printf("%d",rawBitPartTwo[i]);
    fprintf(arquivo,"%d",rawBitPartTwo[i]);


		if(i == 1){
			printf(" ");
      fprintf(arquivo," ");
    }

		if( i == (auxContOne - 3)){
					printf(" ");
          fprintf(arquivo," ");
        }
		// printf("auxContOne: %d", i);

		// if(rawBitPartOne[i] == rawBitPartTwo[i]){
		// contAux = contAux + 1;
		// printf("Igual em: %d", i);
		// }

  	}
  	printf("\n");
    fprintf(arquivo,"\n");

    fclose(arquivo);

    free(rawBitSamsung);
    free(samsungDataRaw);

  	printf("Elementos Iguais: %d\n", contAux);

  }
}
